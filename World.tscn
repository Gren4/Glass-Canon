[gd_scene load_steps=33 format=2]

[ext_resource path="res://Players and Enemies/Player/Player.tscn" type="PackedScene" id=1]
[ext_resource path="res://Materials/Test_material.tres" type="Material" id=2]
[ext_resource path="res://Materials/Test_material_2.tres" type="Material" id=3]
[ext_resource path="res://Materials/Test_material_3.tres" type="Material" id=4]
[ext_resource path="res://World.gd" type="Script" id=5]
[ext_resource path="res://Weapons/Armed/Gun/Gun_pickup.tscn" type="PackedScene" id=6]
[ext_resource path="res://Platform4.gd" type="Script" id=7]
[ext_resource path="res://Weapons/Pickup/AmmoPickup.tscn" type="PackedScene" id=8]
[ext_resource path="res://Weapons/Armed/Smoke/Smoke.tscn" type="PackedScene" id=9]
[ext_resource path="res://Weapons/Armed/Gun/GunBulletHole/GunBulletHole.tscn" type="PackedScene" id=10]
[ext_resource path="res://Weapons/Armed/MuzzleFlash.tscn" type="PackedScene" id=11]
[ext_resource path="res://Weapons/Armed/Smoke/SmokeGradient.tres" type="Gradient" id=12]
[ext_resource path="res://Weapons/Armed/Riffle/Riffle_pickup.tscn" type="PackedScene" id=13]
[ext_resource path="res://Weapons/Armed/Gun/GunBulletHole/GunBulletHoleTexture.png" type="Texture" id=14]
[ext_resource path="res://Players and Enemies/Enemies/Enemy.tscn" type="PackedScene" id=15]

[sub_resource type="BoxShape" id=1]

[sub_resource type="CubeMesh" id=2]

[sub_resource type="CubeMesh" id=3]

[sub_resource type="BoxShape" id=4]

[sub_resource type="BoxShape" id=9]
extents = Vector3( 1, 0.139748, 1 )

[sub_resource type="Animation" id=10]
resource_name = "Float"
length = 10.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:translation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1.1, 2, 3.2, 4.1, 5.2, 7, 10 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 0,
"values": [ Vector3( 54.8686, 11.3345, -48.7524 ), Vector3( 28.9954, 4.6698, -48.7524 ), Vector3( 7.82635, 11.3345, -48.7524 ), Vector3( 14.8827, 21.6543, -68.5902 ), Vector3( 20.1749, 11.3345, -83.4685 ), Vector3( 37.9315, 18.0249, -81.3325 ), Vector3( 66.9878, 11.3345, -77.8371 ), Vector3( 54.8686, 11.3345, -48.7524 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:rotation_degrees")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 1, 2 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector3( 0, 0, 0 ), Vector3( 0, 45, 0 ), Vector3( 0, 90, 0 ) ]
}

[sub_resource type="Animation" id=11]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:translation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Vector3( 54.8686, 11.3345, -48.7524 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:rotation_degrees")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Vector3( 0, 0, 0 ) ]
}

[sub_resource type="BoxShape" id=5]

[sub_resource type="CubeMesh" id=6]

[sub_resource type="CubeMesh" id=7]

[sub_resource type="BoxShape" id=8]

[sub_resource type="SpatialMaterial" id=18]
resource_local_to_scene = true
flags_transparent = true
flags_unshaded = true
albedo_texture = ExtResource( 14 )

[sub_resource type="GradientTexture" id=13]
gradient = ExtResource( 12 )

[sub_resource type="Curve" id=14]
_data = [ Vector2( 0, 0.0420455 ), 0.0, -0.188088, 0, 0, Vector2( 0.25, 0.260227 ), -9.45455, 0.0, 0, 0 ]

[sub_resource type="CurveTexture" id=15]
curve = SubResource( 14 )

[sub_resource type="ParticlesMaterial" id=16]
resource_local_to_scene = true
emission_shape = 1
emission_sphere_radius = 0.02
direction = Vector3( 0, 1, 0 )
spread = 0.5
gravity = Vector3( 0, 0, 0 )
initial_velocity = 0.2
initial_velocity_random = 0.05
angular_velocity = 4.0
angular_velocity_random = 1.0
linear_accel = 0.1
linear_accel_random = 0.1
angle = 360.0
angle_random = 1.0
scale = 0.2
scale_curve = SubResource( 15 )
color_ramp = SubResource( 13 )
anim_speed = 0.1
anim_offset = 0.1
anim_offset_random = 0.1

[sub_resource type="ParticlesMaterial" id=17]
resource_local_to_scene = true
spread = 180.0
gravity = Vector3( 0, 0, 0 )
initial_velocity = 0.1
angle = 564.7
angle_random = 0.77
scale = 0.18

[node name="World" type="Spatial"]
script = ExtResource( 5 )

[node name="Enemy" parent="." instance=ExtResource( 15 )]
transform = Transform( 0.733149, 0, -0.680069, 0, 1, 0, 0.680069, 0, 0.733149, -0.733149, 3.60268, -30.049 )
player_path = NodePath("../Player")

[node name="Enemy2" parent="." instance=ExtResource( 15 )]
transform = Transform( -0.408187, 0, 0.912898, 0, 1, 0, -0.912898, 0, -0.408187, 41.231, 3.89519, -60.22 )
player_path = NodePath("../Player")

[node name="Player" parent="." groups=["Player"] instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 11.6459, 0 )

[node name="Pickups" type="Spatial" parent="."]

[node name="AmmoPickup" parent="Pickups" instance=ExtResource( 8 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 41.1423, 13.0252, 0 )
weapon_name = "Gun"

[node name="AmmoPickup2" parent="Pickups" instance=ExtResource( 8 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -10.8005, 1.51433, 0 )
weapon_name = "Gun"

[node name="GunPickUp" parent="Pickups" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.017118, 14.8805, -3.34875 )
extra_ammo = 100

[node name="GunPickUp2" parent="Pickups" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 61.0139, 1.90787, -33.6518 )
extra_ammo = 200

[node name="RifflePickUp" parent="Pickups" instance=ExtResource( 13 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 2.73972, 8.42868, -3.0162 )
extra_ammo = 20000

[node name="Map" type="Spatial" parent="."]

[node name="Ground" type="StaticBody" parent="Map" groups=["World"]]
transform = Transform( 100, 0, 0, 0, 1, 0, 0, 0, 100, 0, 0, 0 )

[node name="CollisionShape" type="CollisionShape" parent="Map/Ground"]
shape = SubResource( 1 )

[node name="MeshInstance" type="MeshInstance" parent="Map/Ground"]
mesh = SubResource( 2 )
material/0 = ExtResource( 4 )

[node name="Platform" type="StaticBody" parent="Map" groups=["Wall", "World"]]
transform = Transform( 5, 0, 0, 0, 3, 0, 0, 0, 5, 0, 3.97002, 0 )
collision_mask = 3

[node name="MeshInstance" type="MeshInstance" parent="Map/Platform"]
mesh = SubResource( 3 )
material/0 = ExtResource( 3 )

[node name="CollisionShape" type="CollisionShape" parent="Map/Platform"]
shape = SubResource( 4 )

[node name="MoovingPlatform" type="KinematicBody" parent="Map" groups=["Wall", "World"]]
transform = Transform( 5, 0, 0, 0, 3, 0, 0, 0, 5, 54.8686, 11.3345, -48.7524 )
collision_mask = 3
script = ExtResource( 7 )

[node name="MeshInstance" type="MeshInstance" parent="Map/MoovingPlatform"]
mesh = SubResource( 3 )
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="Map/MoovingPlatform"]
shape = SubResource( 4 )

[node name="Area" type="Area" parent="Map/MoovingPlatform"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.98348, 0 )
monitorable = false
gravity_vec = Vector3( 0, 0, 0 )
gravity = -32.0

[node name="CollisionShape" type="CollisionShape" parent="Map/MoovingPlatform/Area"]
shape = SubResource( 9 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Map/MoovingPlatform"]
autoplay = "Float"
playback_process_mode = 0
playback_speed = 0.5
anims/Float = SubResource( 10 )
anims/RESET = SubResource( 11 )

[node name="Platform2" type="StaticBody" parent="Map" groups=["Wall", "World"]]
transform = Transform( 5, 0, 0, 0, 3, 0, 0, 0, 5, 37.2323, 3.97002, 0 )
collision_mask = 3

[node name="MeshInstance" type="MeshInstance" parent="Map/Platform2"]
mesh = SubResource( 3 )
material/0 = ExtResource( 3 )

[node name="CollisionShape" type="CollisionShape" parent="Map/Platform2"]
shape = SubResource( 4 )

[node name="Platform3" type="StaticBody" parent="Map" groups=["Wall", "World"]]
transform = Transform( 5, 0, 0, 0, 3, 0, 0, 0, 5, 41.3022, 9.84936, 0 )
collision_mask = 3

[node name="MeshInstance" type="MeshInstance" parent="Map/Platform3"]
mesh = SubResource( 3 )
material/0 = ExtResource( 3 )

[node name="CollisionShape" type="CollisionShape" parent="Map/Platform3"]
shape = SubResource( 4 )

[node name="Wall" type="StaticBody" parent="Map" groups=["Wall", "World"]]
transform = Transform( 20, 0, 0, 0, 10, 0, 0, 0, 1, 19.1302, 10.9438, 5.82087 )
collision_mask = 3

[node name="CollisionShape" type="CollisionShape" parent="Map/Wall"]
shape = SubResource( 5 )

[node name="MeshInstance" type="MeshInstance" parent="Map/Wall"]
mesh = SubResource( 6 )
material/0 = ExtResource( 2 )

[node name="Wall2" type="StaticBody" parent="Map" groups=["Wall", "World"]]
transform = Transform( 20, 0, 0, 0, 10, 0, 0, 0, 1, 56.1736, 10.9438, 5.82087 )
collision_mask = 3

[node name="CollisionShape" type="CollisionShape" parent="Map/Wall2"]
shape = SubResource( 5 )

[node name="MeshInstance" type="MeshInstance" parent="Map/Wall2"]
mesh = SubResource( 6 )
material/0 = ExtResource( 2 )

[node name="Wall3" type="StaticBody" parent="Map" groups=["Wall", "World"]]
transform = Transform( 12.3615, 2.33836, 0.750534, -0.54126, 9.60499, -0.276965, -15.713, 1.50874, 0.59999, 86.3046, 10.9438, -9.06185 )
collision_mask = 3

[node name="CollisionShape" type="CollisionShape" parent="Map/Wall3"]
shape = SubResource( 5 )

[node name="MeshInstance" type="MeshInstance" parent="Map/Wall3"]
mesh = SubResource( 6 )
material/0 = ExtResource( 2 )

[node name="Wall4" type="StaticBody" parent="Map" groups=["Wall", "World"]]
transform = Transform( 4.20978, 0, 0.977596, 0, 10, 0, -19.5519, 0, 0.210489, 102.113, 10.9438, -41.7881 )
collision_mask = 3

[node name="CollisionShape" type="CollisionShape" parent="Map/Wall4"]
shape = SubResource( 5 )

[node name="MeshInstance" type="MeshInstance" parent="Map/Wall4"]
mesh = SubResource( 6 )
material/0 = ExtResource( 2 )

[node name="Wall5" type="StaticBody" parent="Map" groups=["Wall", "World"]]
transform = Transform( -7.63335, 0, 0.9243, 0, 10, 0, -18.486, 0, -0.381667, 98.8822, 10.9438, -78.9632 )
collision_mask = 3

[node name="CollisionShape" type="CollisionShape" parent="Map/Wall5"]
shape = SubResource( 5 )

[node name="MeshInstance" type="MeshInstance" parent="Map/Wall5"]
mesh = SubResource( 6 )
material/0 = ExtResource( 2 )

[node name="Wall6" type="StaticBody" parent="Map" groups=["Wall", "World"]]
transform = Transform( -16.9116, 0, 0.533851, 0, 10, 0, -10.677, 0, -0.845579, 75.6051, 10.9438, -107.409 )
collision_mask = 3

[node name="CollisionShape" type="CollisionShape" parent="Map/Wall6"]
shape = SubResource( 5 )

[node name="MeshInstance" type="MeshInstance" parent="Map/Wall6"]
mesh = SubResource( 6 )
material/0 = ExtResource( 2 )

[node name="Stairs" type="StaticBody" parent="Map" groups=["World"]]
transform = Transform( 5, 0, 0, 0, 6.32093, -0.948744, 0, 18.9749, 0.316047, 41.2144, 5.5142, -23.6647 )

[node name="MeshInstance" type="MeshInstance" parent="Map/Stairs"]
mesh = SubResource( 7 )
material/0 = ExtResource( 3 )

[node name="CollisionShape" type="CollisionShape" parent="Map/Stairs"]
shape = SubResource( 8 )

[node name="Particles" type="Node" parent="."]

[node name="GunBulletHole" parent="Particles" instance=ExtResource( 10 )]
material/0 = SubResource( 18 )

[node name="Smoke" parent="Particles" instance=ExtResource( 9 )]
process_material = SubResource( 16 )

[node name="MuzzleFlash" parent="Particles" instance=ExtResource( 11 )]
process_material = SubResource( 17 )

[connection signal="body_entered" from="Map/MoovingPlatform/Area" to="Map/MoovingPlatform" method="_on_Area_body_entered"]
[connection signal="body_exited" from="Map/MoovingPlatform/Area" to="Map/MoovingPlatform" method="_on_Area_body_exited"]
